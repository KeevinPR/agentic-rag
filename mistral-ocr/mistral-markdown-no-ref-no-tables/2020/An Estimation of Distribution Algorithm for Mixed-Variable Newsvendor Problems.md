# An Estimation of Distribution Algorithm for Mixed-Variable Newsvendor Problems 

Feng Wang, Member, IEEE, Yixuan Li, Aimin Zhou ${ }^{\oplus}$, Senior Member, IEEE, and Ke Tang ${ }^{\oplus}$, Senior Member, IEEE


#### Abstract

As one of the classical problems in the economic market, the newsvendor problem aims to make maximal profit by determining the optimal order quantity of products. However, the previous newsvendor models assume that the selling price of a product is a predefined constant and only regard the order quantity as a decision variable, which may result in an unreasonable investment decision. In this article, a new newsvendor model is first proposed, which involves of both order quantity and selling price as decision variables. In this way, the newsvendor problem is reformulated as a mixed-variable nonlinear programming problem, rather than an integer linear programming problem as in previous investigations. In order to solve the mixed-variable newsvendor problem, a histogram model-based estimation of distribution algorithm (EDA) called $\mathbf{E D A}_{\text {mren }}$ is developed, in which an adaptive-width histogram model is used to deal with the continuous variables and a learning-based histogram model is applied to deal with the discrete variables. The performance of $\mathrm{EDA}_{\text {mren }}$ was assessed on a test suite with eight representative instances generated by the orthogonal experiment design method and a real-world instance generated from real market data of Alibaba. The experimental results show that, EDA $_{\text {mren }}$ outperforms not only the state-of-the-art mixed-variable evolutionary algorithms, but also a commercial software, i.e., Lingo.


Index Terms-Estimation of distribution algorithm (EDA), histogram model, mixed-variable optimization problem, newsvendor problem, orthogonal experiment design.

## I. INTRODUCTION

TO ORDER how many products at what price, so as to make profit without taking excess risks, is one of the most elementary question for investors in economic market [1].

Manuscript received February 2, 2019; revised May 27, 2019; accepted July 19, 2019. Date of publication August 1, 2019; date of current version May 29, 2020. This work was supported in part by the National Nature Science Foundation of China under Grant 61773296, Grant 61673180, Grant 61672478, and Grant 61731009, and in part by the Research Fund for Academic Team of Young Scholars at Wuhan University under Grant Whu2016013. (Corresponding author: Aimin Zhou.)
F. Wang and Y. Li are with the School of Computer Science, Wuhan University, Hubei 430072, China (e-mail: fengwang@whu.edu.cn; liyixuan@whu.edu.cn).
A. Zhou is with the School of Computer Science and Technology, East China Normal University, Shanghai 200062, China (e-mail: anzhou@cs.ecnu.edu.cn).
K. Tang is with the Shenzhen Key Laboratory of Computational Intelligence, Department of Computer Science and Engineering, Southern University of Science and Technology, Shenzhen 518055, China (e-mail: tangk3@sustech.edu.cn).

This article has supplementary downloadable multimedia material available at http://ieeexplore.ieee.org provided by the author.

Color versions of one or more of the figures in this article are available online at http://ieeexplore.ieee.org.
Digital Object Identifier 10.1109/TEVC. 2019.2932624

In the scenarios like financial trading, marketing and product management [2]-[4], this question is typically formulated as a newsvendor model, in which the investors (e.g., retailers) make a decision on the order quantity of products based on the customers' actual (probably uncertain) demand of products. In other words, with a newsvendor model, a decision maker aims at seeking the optimal ordering strategy that leads to the maximum profit. Since its birth in 1950s, the newsvendor model has always been a critical research topic in economics, and has evolved with the development of new business models and new findings in economics, resulting in variants considering model parameters and decision variables [5], variants employing different objective functions [6], [7], and variants having various constraints [8]-[10].

Recently, due to the rise of new trading modes, such as presale [11] and crowdfunding [12], under the global market environments, two market factors, i.e., selling price and holding cost, which were more or less overlooked in previous research on newsvendor models, are gaining more and more attentions.

1) Selling Price: Previous newsvendor models treat selling price and demand of a product as two independent variables. However, with the development of social e-commerce, some new trading modes have emerged in trading market. It has been revealed that the selling price and actual demand are highly correlated in these emerging modes [13].
2) Holding Cost: With the expansion of retail companies, holding cost, i.e., the cost for warehousing products before sale, has become a major cost for many global retail companies. For example, it has been reported that the annual holding cost for Walmart is approximately $25 \%$ of its products' value [14]. However, most previous newsvendor models only concern purchasing cost, while assuming the holding cost is negligible.
By taking the above two emerging issues into account, this article proposes a new newsvendor model. Briefly speaking, while previous models assume the selling price of a product as a predefined constant and require seeking the optimal order quantity of the product, the proposed model also involves the selling price as a decision variable and requires a simultaneous optimization of both selling price and order quantity. Although such a modification appears to be minor at the first glance, the resultant optimization problem becomes a mixed integer nonlinear programming (MINLP) problem, rather than an integer linear programming (ILP) problem as

done in previous models, and thus brings significant challenges in the problem-solving aspect [15]-[17]. Hence, to address the MINLP problem induced by the new mixed-variable newsvendor model, a novel estimation of distribution algorithm (EDA) for mixed-variable newsvendor problem, denoted as $\mathrm{EDA}_{\text {mvn }}$, is further proposed in this article. Specifically, $\mathrm{EDA}_{\text {mvn }}$ employs a histogram model-based framework to estimate the probability distributions of different variables and sample new trail solutions. In $\mathrm{EDA}_{\text {mvn }}$, an adaptive-width histogram (AWH) model and a learning-based histogram (LBH) model are proposed to accelerate the search for continuous and discrete variables, respectively. A tailored initialization scheme is also designed to ensure the initial solution to be feasible.

To summarize, the major contributions of this article include the following.

1) A newsvendor model is built, which considers both selling price and order quantity as decision variables and the holding cost as a constraint. The model transforms the newsvendor problem into a constrained MINLP problem. Given the fact that such a model represents the emerging scenarios of the newsvendor problems, tackling it will lead to significant applications in the economic market.
2) An $\mathrm{EDA}_{\text {mvn }}$ algorithm is proposed for the new newsvendor model. Specifically, an AWH model is used to deal with the continuous variables, as well as an LBH model is used to deal with the discrete variables. Empirical studies show that $\mathrm{EDA}_{\text {mvn }}$ not only outperforms some state-of-the-art evolutionary algorithms (EAs) for mixedvariable optimization problems, but also achieves better results than a commercial software, i.e., Lingo.
3) A benchmark test suite, which contains a synthetic benchmark suite and a real-world benchmark, is provided. The data of the real-world benchmark is from Alibaba, which can help us assess the performance of our model and algorithm in a real-market scenario. The synthetic benchmark suite considers various number of products (i.e., dimensionality of the problem), sensitivity of the demand on selling price (i.e., correlation between variables), and tightness of the constraints, is developed with the orthogonal experiment design approach. Such a synthetic test suite, originated from a real-world problem, provides a representative of the instance space of the newsvendor problem, and thus could be employed by interested readers in the evolutionary computation community for further study on MINLP in general.
The rest of this article is organized as follows. Section II briefly introduces the basic newsvendor model and gives detailed formalization of the new mixed-variable newsvendor problem. Section III describes the proposed $\mathrm{EDA}_{\text {mvn }}$ for the mixed-variable newsvendor problem. Section IV introduces the detail procedures of select the representative test problems. The experimental studies are present in Section V to verify the performance of the new model and the proposed algorithm. Finally, Section VI concludes this article and highlights some directions for future work.

## II. NewSVENDor MODELS AND SOLVERS

This section introduces the related assumptions and notations, the classical newsvendor model, our new model, and some existing solvers for newsvendor problems.

## A. Assumptions and Notations

In the basic newsvendor model, a decision maker determines the order quantity of products to acquire as much profit as possible given some constraints. Here are some basic assumptions that are made to develop the mathematical model.

1) There is a single period to order the products.
2) The demand for the product is a random variable.
3) The ordering cost for the same product is fixed during the purchasing process.
4) The selling price is fixed without any discount during the selling period.
5) Excess ordering products that are more than the realized demand are sold with salvage value at the end of the selling period.
6) If the total demand is larger than the number of product, the customers' demand is responded by the actually ordering quantity.
7) The total available budget is limited.

In order to describe the model clearly, the following notations are defined.

1) $M$ : The number of products.
2) $m$ : The index for the $m$ th product $(m=1, \ldots, M)$.
3) $X$ : The order quantity vector for all products.
4) $P$ : The selling price vector for all products.
5) $O$ : The maximum total ordering cost in one investment.
6) $H$ : The maximum total holding cost in one investment.
7) $B$ : The maximum budget constraint.
8) $x^{m}$ : The order quantity for the $m$ th product.
9) $d^{m}$ : The demand for the $m$ th product.
10) $c^{m}$ : The ordering cost of the $m$ th product per unit.
11) $p^{m}$ : The selling price of the $m$ th product per unit.
12) $s^{m}$ : The salvage value of the $m$ th product per unit.
13) $u^{m}$ : The understock cost of the $m$ th product per unit.
14) $h^{m}$ : The holding cost of the $m$ th product per unit.

## B. Basic Newsvendor Model

Let $(*)^{+}=\max \{*, 0\}$, then the multiproduct newsvendor problem with a budget constraint can be expressed as follows:

$$
\begin{aligned}
& \max U(X)=\sum_{m=1}^{M}\left[\left(p^{m}-c^{m}\right) \min \left\{x^{m}, d^{m}\right\}\right. \\
& \left.+\left(x^{m}-d^{m}\right)^{+} s^{m}-\left(d^{m}-x^{m}\right)^{+} u^{m}\right] \\
& \text { s.t. } \sum_{m=1}^{M} c^{m} x^{m} \leq B
\end{aligned}
$$

where $U(X)$ is the profit function, $\left(p^{m}-c^{m}\right) \min \left\{x^{m}, d^{m}\right\},\left(x^{m}-\right.$ $\left.d^{m}\right)^{+} s^{m}$, and $\left(d^{m}-x^{m}\right)^{+} s^{m}$ are the selling profit, the salvage residual value, and the understocking cost of the $m$ th product, respectively.

It should be noted that it is not easy to acquire real demand in the future of the $m$ th product. For convenience in mathematical derivation, the $m$ th product's demand is always assumed to subject to a probability distribution, e.g., normal distribution or uniform distribution [7], [18]. But these probability distributions may not represent the real-market demand very well.

## C. Mixed-Variable Newsvendor Model

With the development of the investment market, the basic newsvendor model can not describe newsvendor problems in the real-world investment market effectively. As mentioned above, most previous newsvendor models assume that the demand is subject to a fixed probability distribution, involve no more than two constraints, and use the order quantity as the only decision variable. The basic model does not consider the two new but important factors, i.e., selling price and holding cost. Specifically, in (1), the selling price is considered as a given constant. However, recent studies have found that it is related to the market demand [13]. In addition, the profit function in (1) ignores the products' holding cost.

For these reasons, we propose a new mixed-variable newsvendor model. This new model considers two kinds of decision variables: 1) order quantity and 2) selling price, and some crucial constraints simultaneously, i.e., total ordering cost constraint, total holding cost constraint, and price setting constraint.

1) Optimization Objective: The demand in real-market is always affected by some market factors, e.g., policy, time, and selling price. Among these factors, the selling price of product has crucial impact on the demand of product, which would directly affect the order quantity of the investors. However, the influence of the selling price on the market has always been neglected in the basic models. As the real demand of product dynamically changes with the selling price, investors may make improper decisions by using those old models. Some researchers have realized the importance of selling price on the demand and have discussed how to set appropriate price for each product in the newsvendor model [19], [20]. Therefore, both selling price and order quantity of products should be considered as decision variables.

The real demand of product changes with the selling price as follows [13]:

$$
d^{m}=\alpha-\beta p^{m}
$$

where $\alpha$ is the maximum demand of the $m$ th product and $\beta$ is the influence coefficient. This equation reveals that the demand of product $d^{m}$ is not independent but price-deterministic, which means the demand of product will decrease as the selling price increases.

Here, the decision variables are $\langle X, P\rangle$, which consist of discrete order quantity variables $x$ and continuous selling price variables $p$. The non-negative linear additive demand broadly reflects that price is sensitive to investment market. In order to obtain a maximum profit, decision maker determines not only by the order quantity but selling price of products. The optimization objective function of the proposed model can be
expressed as follows:

$$
\begin{aligned}
U(X, P)=\sum_{m=1}^{M} & {\left[\left(p^{m}-c^{m}\right) \min \left\{x^{m}, d^{m}\right\}\right.} \\
& \left.+\left(x^{m}-d^{m}\right)^{+} s^{m}-\left(d^{m}-x^{m}\right)^{+} u^{m}-h^{m} x^{m}\right]
\end{aligned}
$$

where $U(X, P)$ represents the profit of investment decisionmaking, and $h^{m} x^{m}$ is the holding cost of the $m$ th product.
2) Constraints: In the real-world market, investors always make decisions with some restrained resources. In the new model, we consider the holding cost constraint as a resource constraint to make the model more realistic. What is more, it is unreasonable to set an infinite price. Therefore, the price setting constraint is also crucial. Since the total cost of an investment is limited, the sum of these two constraints should be subject to

$$
O+H \leq B
$$

where

$$
\begin{aligned}
& \sum_{m=1}^{M} c^{m} x^{m} \leq O \\
& \sum_{m=1}^{M} h^{m} x^{m} \leq H
\end{aligned}
$$

These two resource constraints (ordering cost constraint and holding cost constraint) arose from real-world investments can describe the real market more reasonable and satisfactory.

Besides the above resource constraints, the decision-making interval of price should also be considered. As the demand will linearly decrease with price [see (2)], a smaller or larger price will make the demand be inappropriate for the real market. Hence, the price of product should be subject to a suitable interval, which can be described as follows:

$$
\underline{p}^{m} \leq p^{m} \leq \overline{p^{m}}
$$

where $\underline{p}^{m}$ and $\overline{p^{m}}$ are lower and upper price of $m$ th product.
3) Mathematical Model: The new newsvendor model can be formulated as follows:

$$
\begin{aligned}
& \max U(X, P)=\sum_{m=1}^{M}\left[\left(p^{m}-c^{m}\right) \min \left\{x^{m}, d^{m}\right\}+\left(x^{m}-d^{m}\right)^{+} s^{m}\right. \\
& \left.\quad-\left(d^{m}-x^{m}\right)^{+} u^{m}-h^{m} x^{m}\right]
\end{aligned}
$$

s.t. $O+H \leq B$

$$
\begin{aligned}
& \sum_{m=1}^{M} c^{m} x^{m} \leq O \\
& \sum_{m=1}^{M} h^{m} x^{m} \leq H \\
& \underline{p}^{m} \leq p^{m} \leq \overline{p^{m}}
\end{aligned}
$$

From (3) and (1), we can see that the major difference between the new model and the basic model is on the decision variables and the constraints. In addition, the first term of the objective function [see (3)] becomes nonlinear since the demand of product depends on its price. And we can also find

that, for $m=1, \ldots, M$, if $x^{m}>d^{m}$, the model is nonlinear, but degenerates into a linear model when $x^{m}<d^{m}$. Whereas, in the real market, we cannot guarantee that the order quantities of all products are smaller than their demands, so the new newsvendor problem is in general a nonlinear problem. As a result, this new model can be regarded as a model consisting of mixed decision variables (continuous price variables and discrete order quantity variables) and linear constraints.

## D. Newsvendor Problem and MINLP Solvers

To solve newsvendor problems, some deterministic methods have been proposed. One of the most commonly used methods is the mathematical deduction method, e.g., in [21] and [22]. This algorithm is based on some strong assumptions that the objective function is continuous and differentiable and can easily get substantial gradient information. Another widely used deterministic method is the branch and bound method (BBM) [23]. BBM works well for simple problems, but for complex problem, it may fail to return a promising solution within a reasonable computational time. What is more, some other deterministic methods have also been proposed for newsvendor problems. Zhang et al. [24] proposed a binary solution method for the single-constraint model. Abdel-Malek and Areeratchakul [8] used a quadratic function to approximate the origin objective function, which simplifies the optimization problem but introduces error and can not get an accurate result for decision making.

To deal with MINLP problems, many heuristic methods have been proposed. Since EAs do not rely on the mathematical properties and are easy to be implemented, some EA-based methods have been developed to solve the MINLP problems. These methods mainly focus on the characteristics of the variables and different encoding schemes as well as evolutionary operators have also been proposed. MIES [25] is designed for continuous variables and nominal discrete and integer variables. GAMBIT [26] is proposed based on MIES and extends to solve constrained MINLP problems. A modelbased EA that utilizes mixed-variable dependencies is proved to be successful for the black-box constraint problems [27]. Some other algorithms, which exploit the advantages of swarm intelligence algorithms have also been proposed for MINLP problems [28]-[32]. And some of these algorithms have been successfully applied in real-world applications, such as structural optimization problems in design industry [28], [33], [34], chemical engineering optimization problems [35], [36], scheduling problems in manufacturing [37], and insurance investment planning problems [38].
Unlike the previous MINLP problems, the mixed-variable newsvendor model proposed in this article is much more complex. First, as we can see in (3), the parameters $p^{m}$ and $d^{m}$ in the first term of the objective function have a tight correlation due to (2), and the new newsvendor problem is in general a nonlinear problem but degenerates into linear in some dimensions since the values of $p^{m}$ and $x^{m}$ are uncertain, which makes the landscape of the objective function become very rugged. Second, the number of product in this new model should be scalable in real applications, so the number of decision
variables in the mixed-variable newsvendor model might be larger than the existing MINLP problems, which makes the decision space become more complex. As a result of this, it is very challengeable for the existing algorithms to find optimal solutions in the mixed-variable newsvendor model.

In the meanwhile, since the mixed-variable newsvendor problem can be formulated as a constrained MINLP model, there are several commercial MINLP solvers, e.g., Lingo ${ }^{1}$ and CPLEX. ${ }^{2}$ However, these commercial solvers are also very time-consuming, especially for complex large-scale problems.

## III. Estimation of Distribution Algorithm for Mixed-Variable Newsvendor Problems

As mentioned in Section II-C, in the proposed mixedvariable newsvendor model, the objective function is discontinuous and nonlinear, and the constraints among the variables are also specific. Since EA is not restricted by the characteristics of the objective function, it might be a promising way to solve this new model. To the best of our knowledge, there is little work solving the newsvendor problems by using EAs. Although there are some EAs have been designed for newsvendor model [39], [40], the newsvendor models proposed in [39] and [40] are bi-objective, and only continuous variables are considered in [40]. Since these models are totally different from our single objective mixed-variable newsvendor model with multiple constraints, the corresponding algorithms are not suitable for solving this new mixed-variable model. As a result of this, it is required to design a new algorithm for the new mixed-variable newsvendor model.

EDA is a simple but effective EA. Unlike other EAs, EDAs learns the landscape of the search space by using a probabilistic model and generate new solutions by sampling from the model [41]-[45], and it has been widely applied to many real-world problems [46], [47]. Due to the continuous variables (the selling price of product $p$ ), the discrete variables (the order quantity of products $x$ ) and multiple constraints, the search space for the mixed-variable newsvendor problem is extremely complicated.

In this article, we propose a new EDA, called EDA $_{\text {mron }}$, to deal with the mixed-variable newsvendor model. Specifically, a modified univariate histogram marginal model is used to deal with the continuous variables, as well as an LBH model is used to deal with the discrete variables. Besides, to improve the quality of the solutions in the initial population, a constraint handling method is embedded into $\mathrm{EDA}_{\text {mron }}$. And a constraints-based selection criterion is utilized in $\mathrm{EDA}_{\text {mron }}$ to select individuals under the multiple constraints. The flowchart of $\mathrm{EDA}_{\text {mron }}$ is shown in Fig. 1, and the parameter $t$ is the current iteration, which increases after each generation. First, several individuals are initialized by a tailored initialization scheme. Then two histogram models, i.e., AWH model and LBH model, are used to deal with continuous variables $P$ (selling price) and discrete variables $X$ (order quantity), respectively. New individuals can be sampled from the probability

[^0]
[^0]:    ${ }^{1}$ https://www.lindo.com/index.php/products/lingo-and-optimizationmodeling
    ${ }^{2}$ https://www.ibm.com/analytics/cplex-optimizer

![img-0.jpeg](img-0.jpeg)

Fig. 1. Flowchart of $\mathrm{EDA}_{m \times n}$.
models established by the AWH model and the LBH model and elite solutions can be selected by the real objective value and the constraint violation (CV). The algorithm will be terminated until $t$ reaches the maximum number of generation $t_{\text {max }}$. The details of $\mathrm{EDA}_{m \times n}$ are presented in the following sections.

## A. Initialization

Since the mixed-variable newsvendor problem is an MINLP problem, we use a vector $\langle X, P\rangle$ to represent each individual in $\mathrm{EDA}_{m \times n}$.

As mentioned above, multiple constraints are considered in the mixed-variable newsvendor model. According to the model proposed in (3), each solution should satisfy the following constraints.

1) The value of the $m$ th product price, denoted as $p^{m}$, should be in the range of $\left[p^{m}, \overline{p^{m}}\right]$.
2) The sum of the ordering cost cannot exceed the total ordering budget.
3) The sum of the holding cost cannot exceed the maximum total holding cost.
4) The total cost cannot exceed the given limit.

Among the above constraints, the first one is a box constraint and can be satisfied by sampling the $p^{m}$ in a certain range. The others are resource constraints. Since each pair of $p^{m}$ and $x^{m}$ is sampled independently and uniformly, the solutions may exceed the constraints and introduce useless information into the search process. In order to promote search efficiency, it is better to initialize the search with feasible solutions. For this reason, an initialization process with constraint handling method is proposed and shown in Algorithm 1.

In the initialization process of an individual $\langle X, P\rangle$, the price of each product is initialized in sequence. Once the price is decided in line 5 , the real demand of each product can be estimated by (2) in line 6 . Then, the order quantity of each product should be initialized in lines 10-14. For each individual, to ensure that the resource constraints are satisfied, after each order quantity is generated, the individual should

```
Algorithm \(1 \text { pop } \leftarrow \text { initialize }(N)\)
    Input: Population size \(N\);
    Output: Initial population pop;
    for \(\mathrm{i} \leftarrow 1\) to N do
        for \(\mathrm{m} \leftarrow 1\) to M do
            \(p_{i}^{m} \leftarrow \operatorname{Uniform}\left(p_{i}^{m}, \overline{p_{i}^{m}}\right)\);
            Estimate \(d_{i}^{m}\) by \(\overline{(2)}\);
            end for
            \(T \leftarrow\{1,2, \ldots, M\}\)
            while \(T \neq \emptyset\) do
            Randomly choose t from T ;
            \(x_{i}^{t} \leftarrow \operatorname{Uniform} \operatorname{int}\left(0, \overline{x_{i}^{t}}\right) ;\)
            if \(x_{i}^{t}>d_{i}^{t}\) then
                \(x_{i}^{t} \leftarrow \operatorname{Gaussian}\left(d_{i}^{t}, \sigma^{2}\right) ;\)
            end if
            if \(\operatorname{pop}_{i}\) satisfies all the constraints then
                \(\mathrm{T} \leftarrow \mathrm{T} \backslash\{\mathrm{t}\}\)
            else
                \(x_{i}^{t} \leftarrow 0\)
            end if
        end while
        Evaluate the fitness of the individual;
    end for
```

be checked by the constraints in line 15. Therefore, the later generated order quantities will be influenced by the former generated ones. In order to avoid that only the first several products are purchased for all individuals, the sequence to generate the product order quantity is random for each individual. By this initialization method, all individuals in the initial population are feasible and maintain a good diversity.

It should be noticed that the investor in our model is rational, therefore, the order quantity for a certain product will not be far from its real demand. This preference information is introduced in the initialization process as the prior information. Once a new generated order quantity is larger than the real demand, we repair it to a rational value. Here, we use the Gaussian distribution to generate this rational value in line 13 where $\sigma$ denotes the investor's rationality degree and set as 0.1 in this article.

## B. Mixed-Variable Probabilistic Models Building and Sampling

In $\mathrm{EDA}_{m \times n}$, a histogram model is used to solve the mixedvariable newsvendor problem and find the optimal solutions. The histogram model is a nonparametric method to estimate the probability distribution. In our approach, two different histogram models are used to deal with the continuous and discrete variables simultaneously. A modified univariate histogram marginal model, i.e., AWH model, is used to deal with the continuous variables, and an LBH model is used to deal with the discrete variables. In this section, we mainly introduce how to establish and update these two models and how to generate new individuals by sampling from these models.

1) Adaptive-Width Histogram Model: Inspired by [48], we propose an AWH model to modeling the population distribution of continuous variables in $\mathrm{EDA}_{m \times n}$. Both AWH model and VWH model [48] are histogram-based models with bins of variable width, but the methodologies of estimating the probability distribution of variables are different. Since the problem scale of the newsvendor model is larger than the benchmark test suite in [48], there is no extra count added when calculating the probability of each histogram. As a result, in order to improve the estimation accuracy of probability distribution in high-dimensional search space, in our AWH model, the probability distribution is updated by counting the individuals in each histogram. In addition, in order to improve the efficiency of the $\mathrm{EDA}_{m \times n}$, an unified framework exploring histogram-based models for mixed variables is developed, where the AWH model is only used to deal with continuous variables.

Let $W$ represent the number of bins in the promising search area, in the AWH model, the search range of a continuous variable is divided into $(W+2)$ bins. And based on the distribution of the individuals in these bins, a probability model $\mathrm{PRO}_{c}$ for the continuous variables will be established. Therefore, for the $m$ th continuous variable $p^{m}$, the $w$ th bin can be described by a tuple $<p^{m, w}, p^{m, w+1}, \mathrm{PRO}_{c}^{m, w}>$, where $p^{m, w}$ and $p^{m, w+1}$ are the boundaries of the bin and $\mathrm{PRO}_{c}^{m, w}$ denotes the probability that $p^{m}$ is from the interval $\left[p^{m, w}, p^{m, w+1}\right)$. The AWH model has the following features.

1) The $W$ bins in the promising area have the same width and contain all the individuals, while the two bins at both sides are empty.
2) With the convergence of population, this promising area will become smaller and smaller. Hence, the width of the $W$ bins in the promising area will become smaller adaptively, while the two bins at both sides will become larger.
3) The adaptively shrinking bins in the promising area can make the algorithm focus on searching high-precision solutions, in the meanwhile, every region in the search space has a chance to be search. Therefore, the exploration and exploitation can be automatically balanced.
To build the AWH model, the search space $\left[p^{m}, \overline{p^{m}}\right]$ of the $m$ th variable is partitioned into $(W+2)$ bins: $\left[p^{m, w}, p^{m, w+1}\right)$, $w=0, \ldots, W$ and $\left[p^{m, W+1}, p^{m, W+2}\right]$, where $p^{m, 0}=p^{m}$ and $p^{m, W+2}=\overline{p^{m}}$. Let $p_{\min , 1}^{m}$ and $p_{\min , 2}^{m}$ be the first and second minimum values of price, respectively, and $p_{\max , 1}^{m}$ and $p_{\max , 2}^{m}$ be the first and second maximum values, respectively, of the $m$ th variables in the current population. Then set

$$
\begin{aligned}
p^{m, 1} & =\max \left\{p_{\min , 1}^{m}-0.5\left(p_{\min , 2}^{m}-p_{\min , 1}^{m}\right), p^{m}\right\} \\
p^{m, W+1} & =\min \left\{p_{\max , 1}^{m}+0.5\left(p_{\max , 1}^{m}-p_{\max , 2}^{m}\right), \overline{p^{m}}\right\}
\end{aligned}
$$

In the AWH model, the $W$ bins in the promising area, range from $\left[p^{m, 1}, p^{m, W+1}\right]$, have the same width, that is

$$
\text { bin_width }=\frac{1}{M}\left(p^{m, W+1}-p^{m, 1}\right)
$$

Let $A^{m, w}$ denote the count of individuals for the $m$ th variable in the $w$ th bin. It is obvious that $A^{m, 1}=A^{m, W+2}=0$. In order
![img-1.jpeg](img-1.jpeg)

Fig. 2. Illustration of the search behavior of the AWH model $(W=3)$. (a) Early stage of the search process. (b) Later stage of the search process.

## Algorithm $2 \mathrm{PRO}_{c} \leftarrow \mathrm{AWH} \_$model(pop, W)

1: Input: the population pop and the number of bins $W$.
2: Output: the probability model $P R O_{c}$.
3: for $\mathrm{m} \leftarrow 1$ to M do
4: Find $p_{\min , 1}^{m}, p_{\min , 2}^{m}, p_{\max , 1}^{m}$ and $p_{\max , 2}^{m}$;
5: Calculate the boundaries of the promising area $p^{m, 1}$ and $p^{m, W+1}$ by (4);
6: Calculate the bin width by (5);
7: for $\mathrm{w} \leftarrow 1$ to $\mathrm{W}+2$ do
8: Count the individuals which fall into the $w^{\text {th }}$ bin and set $A^{m, w}$ by (6);
9: end for
10: Establish the probability model $P R O_{c}^{m}$ by (7);
11: end for
to avoid premature convergence, the count of individuals in the two unpromising search area which is out of $\left[p^{m, 1}, p^{m, W+1}\right]$ will be assigned with a very small value $\varepsilon$ to ensure that all search space of $\left[\underline{p^{m}}, \overline{p^{m}}\right]$ can be searched. Here, we update $A^{m, w}$ as

After that, the probability model $\mathrm{PRO}_{c}^{m}$ of $p^{m}$ for the $w$ th bin could be approximately estimated as

$$
\mathrm{PRO}_{c}^{m, w}=\frac{A^{m, w}}{\sum_{i=1}^{W+2} A^{m, i}}
$$

Fig. 2 shows the search behavior of the AWH model. The AWH model focuses on the promising search areas and is helpful to improve the performance in convergence. Especially in the later stage of the search process, the promising area becomes very small. In that case, the AWH model will spend more resources on exploitation. Meanwhile, the gradual changed promising area makes all the search space have a chance to be searched which can help the algorithm avoid getting trapped into local optima. The pseudo-code of the AWH model is shown in Algorithm 2.
2) Learning-Based Histogram Model: The LBH model is proposed for discrete variables, i.e., the order quantity $x^{m}$. By using the LBH model, a probability model $\mathrm{PRO}_{d}^{m}$ for each available value of $x^{m}$ is established.

In the LBH model, the probability for each available value $v$ of $x^{m}, v \in\left\{0,1, \ldots, \overline{x^{m}}\right\}$ is recorded as $\mathrm{PRO}_{d}^{m, v}$. It should

## Algorithm $3 \mathrm{PRO}_{d} \leftarrow \mathrm{LBH}_{-} \operatorname{model}(\mathrm{pop}, t)$

1: Input: the population pop and the current generation $t$.
2: Output: the probability model $P R O_{d}$.
3: $\gamma \leftarrow \frac{1}{t_{\max }}$;
4: for $\mathrm{m} \leftarrow 1$ to M do
5: for $\mathrm{v} \leftarrow 0$ to $\overline{x^{m}}$ do
6: count the individuals whose value of $x^{m}$ equals to $v$ and set as count ${ }_{v}$;
7: $\quad$ Update $P R O_{d}^{m, v}$ by (9);
8: end for
9: end for
![img-2.jpeg](img-2.jpeg)

Fig. 3. Illustration of the search behavior of the LBH model ( $\overline{x_{m}}=8$ ). (a) Early stage of the search process. (b) Later stage of the search process.
be noticed that each available value is a normalized value. In the beginning, to ensure each available discrete value can be selected, the probability of each available value is set to be equal as

$$
\mathrm{PRO}_{d}^{m, v}(0)=\frac{1}{\overline{x^{m}}+1}
$$

Then, the probability model will be updated by the following steps. In the generation $t$, first, count the individuals whose value of $x^{m}$ equals to $v$ and set it as count ${ }_{v}$. Then update $\mathrm{PRO}_{d}^{m, v}$ as

$$
\mathrm{PRO}_{d}^{m, v}(t)=(1-\gamma) \cdot \mathrm{PRO}_{d}^{m, v}(t-1)+\gamma \cdot\left(\frac{\text { count }_{v}}{N}\right)
$$

where $N$ is the size of population and $t$ the current generation number. $\gamma$ describes the learning rate of population. In this article, the parameter $\gamma$ is set

$$
\gamma=\frac{t}{t_{\max }}
$$

where $t_{\max }$ is maximum number of generation and $t$ is the current iteration. In this way, as the number of generations increases, $\gamma$ will increase gradually, which makes the LBH model use more information from good quality individuals to update the probability model $\mathrm{PRO}_{d}^{m}$.

Fig. 3 illustrates the search behavior of the LBH model $\left(\overline{x_{m}}=8\right)$. Fig. 3(a) and (b) shows the early stage $(\gamma=0)$ and the later stage $(\gamma=1)$ of the search process, respectively. At the beginning, the probability of each available value is set with same value. After some iterations, the solutions with some values (such as 2 and 5 in this example) are better than others, which makes these values have higher probability than others and become more likely to be sampled. The pseudocode to update the LBH model is summarized in Algorithm 3.

## Algorithm 4 Offspring $\leftarrow$ Sampling $\left(P R O_{c}, P R O_{d}\right)$

1: Input: the probability models $P R O_{c}$ and $P R O_{d}$.
2: Output: a new candidate solution offspring $=\langle\mathrm{X}, \mathrm{P}\rangle$.
for $\mathrm{m} \leftarrow 1$ to M do
$P_{c} \leftarrow$ Uniform $(0,1)$;
Select a bin $w$ according $P R O_{c}$ and $P_{c}$;
$p^{m} \leftarrow$ Uniform $\left[p^{m, w-1}, p^{m, w}\right)$;
$P_{d} \leftarrow$ Uniform $(0,1)$;
Select an available value $v$ from $\left\{0,1, \ldots, \overline{x^{m}}\right\}$ according $P R O_{d}$ and $P_{d}$;
$x^{m} \leftarrow v$;
end for
3) Sampling: After the histogram models are established, the new individuals can be generated by sampling from the model. For a continuous variable $p^{m}$, a bin $w$ is first selected by a randomly generated probability, and then $p^{m}$ is uniformly sampled from $\left[p^{m, w-1}, p^{m, w}\right)$. For a discrete variable $x^{m}$, an available value $v$ from $\left\{0,1, \ldots, \overline{x^{m}}\right\}$ is selected by a randomly generated probability. The procedure for generating new individual is shown in Algorithm 4.

## C. Constraints-Based Selection

The penalty function method is a widely used method for handling constraints and producing selection pressure. $\mathrm{EDA}_{m \times n}$ adopts a linear penalty function to select promising individuals.

By using the linear penalty function, the fitness values assigned to individuals can be divided into two parts, i.e., the real objective value and the CV

$$
f(X, P)=U(X, P)+\operatorname{CV}(X, P)
$$

where $U(X, P)$ is the real objective value of the obtained profit. The elite solutions will be selected according to the fitness value $f(X, P)$. The CV is calculated as follows:

$$
\mathrm{CV}(X, P)=k_{1} \sum_{i=1}^{c_{1}}\left|\min \left(g_{i}(X, P), 0\right)\right|+k_{2} \sum_{j=1}^{c_{2}}\left|h_{j}(X, P)\right|
$$

where $g_{i}(X, P)$ is the violation value of $i$ th inequality constraint and $h_{j}(X, P)$ is the violation value of $j$ th equality constraint, $c_{1}$ and $c_{2}$ are the number of inequality constraints and equality constraints, respectively, and $k_{1}$ and $k_{2}$ are the penalty parameters.

## D. Algorithm Framework

Based on the methods presented above, the overall procedure of $\mathrm{EDA}_{m \times n}$ can be presented in Algorithm 5. In line 6, an initial population is generated by the constraint handling method. In lines 9 and 10, the probability models for the continuous and discrete variables are generated, respectively. And then, in line 12, new individuals are generated by sampling from these two probability models. In addition, a global elite replacement strategy is used to select the best $N$ solutions in each generation. Therefore, an archive is employed in our algorithm.

## Algorithm 5 Framework of $E D A_{\text {mom }}$

```
Input:
    1) N : the population size.
    2) \(t_{\max }\) : the maximum number of generation.
    3) \(W\) : the number of bins used in the AWH model.
    Output: the best solution and its objective value.
    pop \(\leftarrow\) initialize \((N)\);
    for \(\mathrm{t} \leftarrow 1\) to \(t_{\max }\) do
        archive \(\leftarrow \emptyset\);
        \(P R O_{c} \leftarrow A W H \_\) model(pop, W);
        PRO \(_{d} \leftarrow L B H \_\) model(pop, \(t\) );
        for \(\mathrm{i}=1\) to N do
            offspring \(\leftarrow\) Sampling \(\left(P R O_{c}, P R O_{d}\right)\);
            archive \(\leftarrow\) archive \(\bigcup\) offspring;
        end for
        archive \(\leftarrow\) archive \(\bigcup\) pop;
        pop.clear();
        Select the best \(N\) individuals according to (11) from
        archive and add them to pop;
    end for
```


## IV. Benchmark Suite for the Mixed-Variable

## Newsvendor Problem

To the best of our knowledge, few benchmark instance for newsvendor problem could be found in the literature. To systematically evaluate the usefulness of the mixed-variable newsvendor model and the effectiveness of the proposed $\mathrm{EDA}_{\text {mom }}$, we first design a synthetic benchmark suite by using orthogonal experiment design method, and then use the real market data from Alibaba as a real-world benchmark.

## A. Synthetic Benchmark

In the mixed-variable newsvendor model, there are four main features: 1) $M$; 2) $\overline{x^{m}}$; 3) constraint force (CF); and 4) price sensitivity (PS). Herein, $M$ is the number of products, $\overline{x^{m}}$ is the maximum value of the discrete variables, $C F$ is the constraints force, and $P S$ is the sensitivity of demand to price. The meaning and the values of these factors are introduced as follows.

1) $M$ determines the dimensions of the search space. In general, solving problem with low dimension is easier than that with high dimension [49], [50]. Therefore, to test the performance of algorithms for solving problems with different dimensions, the value of $M$ is set as $\{20,40,80,100\}$.
2) $\overline{x^{m}}$ determines the search scope of the discrete variables. To test the performance of discrete optimization methods for handling discrete variables with different search scope, $\overline{x^{m}}$ is set as 50 and 100 , respectively.
3) $C F$ determines the complexity of the search space. In order to analyze the influence of constraints on algorithm performance, two different kinds of CF are set in our benchmark suite, denote as weak and strong, respectively. In the mixed-variable newsvendor model, the CF is reflected on the values of total ordering cost and total holding cost. For fairness, these two values are

TABLE I
FACTORS AND LEVELS FOR ORTHOGONAL EXPERIMENT


TABLE II
Synthetic Benchmark Suite for Mixed-Variable Newsvendor Problems. The Numbers in Parentheses Represent the Level of Each Value Corresponding to Table I

correlated to $M$ for different problems. If $\mathrm{CF}=$ Weak, these two values are set as 100 times of the value of $M$. Otherwise, they are set as 50 times of the value of $M$.
4) $P S$ determines the correlation between the continuous variable (i.e., the selling price) and the discrete variable (i.e., the order quantity), and is used to validate the compatibility of the continuous optimization method and discrete optimization method. In the mixedvariable newsvendor model, the PS is denoted as the ratio between the parameter $\alpha$ and $\beta$ in (2). To ensure the demand in the market is non-negative, the lower bound of $\alpha / \beta$ should be given by the selling price. In our test instances, in order to differentiate the difference of $P S$ (PS $=$ Yes or PS $=$ No), we set different values for $\alpha / \beta$. If PS $=$ Yes, the ratio $\alpha / \beta$ is set as 8 for each product, otherwise, this ratio is set as 20.
To sum up, $M$ is regarded as a factor at four different levels and $\overline{x^{m}}, C F$, and $P S$ are regarded as factors at two different levels, as illustrated in Table I.

In order to cover all the feature space, we should test all combinations of these factors in traditional approaches and need at least $4 \times 2^{3}=32$ test instances, which is not necessary and economical. In this article, the orthogonal experiment design method, which can reduce the number of experiments but still achieve satisfactory results, is applied to develop a synthetic benchmark suite. Herein, based on the common used orthogonal factor table $L_{8}\left(4 \times 2^{4}\right)$, we design the orthogonal factor table for the mixed-variable newsvendor problems, as illustrated in Table II. Each row in Table II denotes to the parameter settings of a representative test instance in the synthetic benchmark suite.

The values of the parameters for each instance are set by considering different scenarios of the newsvendor problem. According to the previous research on newsvendor problems [39], [51], [52], for each test instance, the parameters of products are generated as follows and let $t \sim U(a, b)$

denote that $t$ is uniformly generated from interval $[a, b]$ : the holding cost $h^{m} \sim[0,10]$, the ordering cost $c^{m} \sim[0,10]$, and the understood cost $u^{m} \sim[0,10]$, for $m=1,2, \ldots, M$. The detailed information of each instance including parameter setting is shown in the supplementary material.

## B. Real-World Benchmark

The data of the real-world benchmark is from Alibaba. ${ }^{3}$ This data set provides the information of 963 products, including the selling price, overstock cost, understock cost, etc. Since the original data cannot be directly used in the experiment, it is required to do some preprocessing work on the data set before our experimental study. The preprocessing procedure is introduced in the supplementary material and the processed data we used can be found at our website. ${ }^{4}$ In order to test the usefulness of the mixed-variable newsvendor model and the performance of $\mathrm{EDA}_{m v n}$, 50 products are randomly selected from the processed data set and used in our experiment. This real-world benchmark from real market data is denoted as RMdata in this article.

## V. EXPERIMENTAL STUDIES

This section empirically studies the performance of $\mathrm{EDA}_{m v n}$ on the given benchmark suite. Specifically, there are two major concerns that we have to validate by experiments.
The first one is the effectiveness of the proposed $\mathrm{EDA}_{m v n}$ algorithm. In the mixed-variable newsvendor model, domain knowledge, such as PS, is employed to make the model more practical. Whether the domain knowledge can be used by the proposed $\mathrm{EDA}_{m v n}$ algorithm to help the decision makers obtain higher profit is required to be verified at first. And it is also a baseline to roughly check the performance of $\mathrm{EDA}_{m v n}$.
The second one is the efficiency of the proposed $\mathrm{EDA}_{m v n}$ algorithm. To verify this, we compare our algorithm with some state-of-the-art algorithms or solvers. It should be pointed out that although there is no specific algorithm designed directly to solve this kind of newsvendor problem, there are several algorithms for MINLP problems or mixed-variable problems. For example, GA-PSO [31], $A C O_{m v}$ [30], and $D E_{m v}$ [53] are three different kinds of EAs for the mixed-variable problems, and the evolutionary mechanisms behind these three algorithms are very different to $\mathrm{EDA}_{m v n}$. AEDA [38] is an EDA-based algorithm for mixed-variable optimization problems, in which histogram model is only used to handle discrete variables. Therefore, we select these four algorithms as comparison algorithms. In addition, a commercial solver Lingo, which can solve many kind of mathematical programming problems, is also selected as comparison in the experiment.

## A. Parameter Settings

To have a fair comparison, the parameters of the comparison algorithms are set following the recommended setting in the

[^0]original paper. The parameter settings of the experiments are as follows.

1) All algorithms except Lingo are executed independently for 30 runs with 300000 maximum function evaluations (FEs).
2) $E D A_{m v n}$ : The number of bins used to establish the AWH model $W=2000$; the population size $N=600$; the penalty parameters $k_{1}=1000$ and $k_{2}=0$ because there is no equality constraint in our model.
3) GA-PSO: The population size $N=300$; the probability of crossover $P_{c}=1.0$; and the probability of mutation $P_{m}=0.1$.
4) $A C O_{m v}$ : The influence of best quality solutions $q=$ 0.05099 ; the width of the search $\xi=1$; and the population size $N=20$.
5) $D E_{m v}$ : The parameters for discrete variables $F_{d}=0.2$ and $\mathrm{CR}_{d}=0.2$; the parameters for continuous variables $F_{c}=0.5$ and $\mathrm{CR}_{c}=0.5$; the mutation strategy is "DE/current-to-pbest"; and the population size $N=100$.
6) $A E D A$ : The number of individuals selected for model estimation, $N P_{\text {best }}$, is set as $45 \%$ of the whole population; and the population size $N=300$.
In addition, the other four comparison algorithms do not have mechanisms to deal with constraints. Since the mixedvariable newsvendor model involves multiple constraints. To have a fair comparison, the constraint-based selection criterion is also employed in these algorithms.

## B. Validation of Algorithm Effectiveness

The main difference between the mixed-variable newsvendor model and the classical model is that we consider both product's selling price and order quality as decision variables and the real demand of product changes with price in the mixed-variable newsvendor model, while only order quality has been considered as decision variable in the classical model. Therefore, by using the mixed-variable newsvendor model to help us make decision, the price of each product is selected in the range $\left[p_{m}, \bar{p}_{m}\right]$, while by using the classical model, we set each product's price as a fixed number $\bar{p}_{m}$. The reason why we set $\bar{p}_{m}$ as the fixed number is that when the decision makers use the classical model, they don't care about the relationship between the real demand and the price. Therefore, in order to get the maximum profit, they will set the price as higher as possible.

Each instance in Section IV represents a typical application scenario. And we use the mixed-variable newsvendor model and the classical model to help us make decisions in these scenarios, respectively. The optimization algorithm used here is $\mathrm{EDA}_{m v n}$. Here, each instance is tested independently for 30 times with 300000 FEs. The results on the benchmark suite are shown in Table III.

Although in instance $F_{5}$, the performance of $\mathrm{EDA}_{m v n}$ on the mixed-variable newsvendor model shows a little worse than the classical model, the results in other instances show that $\mathrm{EDA}_{m v n}$ can help investors get significantly higher profit on the mixed-variable newsvendor model, including in the real-world benchmark RMdata. These results illustrate that


[^0]:    ${ }^{3}$ https://tianchi.aliyun.com/competition/entrance/231530/
    ${ }^{4}$ https://fengwangwhu.github.io/data

TABLE III
Comparison Results Between the Mixed-Variable Newsvendor Model and Classical Model on the Benchmark Suite. The Best Results Are Shown in Bold Type. " + ," " - " or " $\infty$ " Indicates the Performance of $\mathrm{EDA}_{m v n}$ on the Classical Model Is Better Than, Worse Than or Similar to the Mixed-Variable Newsvendor Model at 0.95 Significance LeveL by a Wilcoxon Rank Sum Test


$\mathrm{EDA}_{m v n}$ is effective to solve the mixed-variable newsvendor model.

## C. Validation of Algorithm Efficiency

To verify the efficiency of $\mathrm{EDA}_{m v n}$, we compare $\mathrm{EDA}_{m v n}$ with other state-of-the-art algorithms, i.e., GA-PSO, AEDA, $\mathrm{DE}_{m v}$, and $\mathrm{ACO}_{m v}$, and a commercial solver Lingo on the benchmark suite designed in Section IV. The comparison results on the benchmark suite are detailed in Table IV. From these results, we can see that $\mathrm{EDA}_{m v n}$ are significantly better than other algorithms in most of the test instances except on $F_{1}$ and $F_{4}$. On $F_{1}$, the result of $\mathrm{EDA}_{m v n}$ is slightly worse than $\mathrm{DE}_{m v}$ but better than the other algorithms. The performance of $\mathrm{EDA}_{m v n}$ on the real-world benchmark RMdata also outperforms others. These results validate that $\mathrm{EDA}_{m v n}$ is more efficient than other algorithms to solve the mixed-variable newsvendor model.

In addition, to testify the effect of each factor in the synthetic benchmark suite on the algorithm performance, we evaluate the average performance of each algorithm on each factor. Detailed analyses of the results are illustrated as follows, and in order to take a fair comparison between different instances, all results on the synthetic benchmark suite are normalized finally.

1) Comparison Under Different Dimensions of Search Space $(M)$ : Table V shows the comparison results under different dimensions of the search space. All the results are shown by the normalized values. $k_{i}^{j}$ is the mean value of the experimental results of factor $j$ at level $i$ in the synthetic benchmark suite. The information of factor level can be found in the above Table I.

From Table V, we can see that $\mathrm{EDA}_{m v n}$ shows a great performance in the high-dimensional problems and a
promising results in the low-dimensional problems. In the meantime, AEDA also shows satisfying results in the highdimensional problems. The major reason is that according to the increasing of dimension, the search space increases geometrically. While in the EDA framework, even at the later stage that the population converge into a very small area, all search space still has a chance to be searched. This feature makes EDA framework have a great global search ability and have a higher chance to find high-quality solutions in the high-dimensional problems.

In addition, although $\mathrm{EDA}_{m v n}$ and AEDA are based on the EDA framework, $\mathrm{EDA}_{m v n}$ still outperforms AEDA on these test instances. A possible reason is that, AEDA assumes the probability model as a given distribution like Gaussian distribution or Cauchy distribution, but $\mathrm{EDA}_{m v n}$ uses two different histogram models to estimate the distribution which can represent the real distribution better. As the estimation of probability models for both discrete variables and continuous variables are histogram models, the reproduction mechanisms in these two histogram models for different types of decision variables are consistent and compatible.
2) Comparison Under Different Number of Available Values of Discrete Variables $\left(\overline{x^{m}}\right)$ : As illustrated in Table VI, $\mathrm{EDA}_{m v n}$ shows a satisfying result in various search range, even though the number of available values is large. This result illustrates that the LBH model for the discrete variables works well.

In the LBH model, the adaptive learning-based strategy is employed, which can make the algorithm avoid early convergence and have a good balance between exploration and exploitation in the discrete search space. As the increasing number of available values make the combinations of the discrete variables grow vigorously, the effect of the LBH model is obviously greater than the other algorithms which utilize different methods for discrete variables, especially in the problems where the search scope of variables is extremely large.
3) Comparison Under Different Degree of Constraint Forces: The multiple constraints in the mixed-variable newsvendor model make the search space become more complicated, especially when the CF becomes strong. The results shown in Table VII also validate that $\mathrm{EDA}_{m v n}$ has a great performance in these test instances, even if in the problems with strong CF. There are two reasons as follows. First, the AWH model makes every region in the continuous search space have a chance to be searched in each iteration. This feature can help $\mathrm{EDA}_{m v n}$ avoid getting trapped into the local optima under the complicated environment. Second, the LBH model is also very suitable for the complex problems by using the learning-based strategy and the adaptive learning rate. Therefore, the combination of these two models can help the algorithm find better solutions.
4) Comparison Under Different Price Sensitivity: From Table VIII, we can see that $\mathrm{EDA}_{m v n}$ and $\mathrm{DE}_{m v}$ outperform other algorithms under this comparison. In some ways, the PS is the connection between the continuous and discrete variables. A high selling price will decrease the real demand and influence the order quantity, or vice verse. In $\mathrm{EDA}_{m v n}$, two histogram models are used to deal with

TABLE IV
Comparison Results for $\mathrm{EDA}_{m v n}$, GA-PSO, $\mathrm{ACO}_{m v}$, $\mathrm{DE}_{m v}$, AEDA, and Lingo on the Benchmark Suite. The Best Results Are Shown in Bold TyPe. " + ," " - ," or "n" Indicates the Performance Is Better Than, Worse Than or Similar to the Performance of $\mathrm{EDA}_{m v n}$ at 0.95 Significance Level by a Wilcoxon Rank Sum Test


TABLE V
Comparison Results on the Synthetic Benchmark Suite With Different Dimensions of the Search Space. The Results Shown by the Normalized Values. Each Row Shows the Results of Different Algorithms Under a Certain Factor Level. The Best Results Are Shown in Bold Type


TABLE VI
COMPARISON RESULTS ON THE SYnTHETIC BENCHMARK SUIte WITH DIPFERENT NUMber OF AVAILABLE Values of DISCRETE Variables. The Results Shown by the Normalized Values. Each Row Shows the Results of DIPFERENT Algorithms Under a Certain Factor Level. The Best Results Are Shown in Bold Type


the continuous and discrete variables, respectively, while in $\mathrm{DE}_{m v}$, original DE and set-based DE are used. The search mechanisms behind each of these two algorithms are highly compatible and consistent. This feature makes these two algorithms have a better performance to deal with these problems where continuous variables are correlate with discrete ones [53]. The results in Table VIII show that $\mathrm{EDA}_{m v n}$ and $\mathrm{DE}_{m v}$ have the best performance and validate the compatible and consistent search mechanisms do have good efficiency.

From the above results and analyses, we can conclude that the proposed $\mathrm{EDA}_{m v n}$ outperforms other algorithms, which can be attributed to the following three reasons. First, EDA has a great performance in global search capability, which makes it more suitable to solve the problems with complicated search
space. Second, the histogram model-based framework, which uses the histogram model to establish the probability models for both continuous and discrete variables, has a great generalization capability. Last but no least, the adaptive scheme in both AWH model and LBH model can help the algorithm get good balance between exploration and exploitation, which makes the search process avoid from trapping into local optimum.
5) Convergence Process: Fig. 4 shows the convergence process of $\mathrm{EDA}_{m v n}$ and other state-of-the-art algorithms on the benchmark suite. We can see that the convergence speed of $\mathrm{EDA}_{m v n}$ is not outstanding on the simple problems (i.e., $F_{1}-F_{4}$ ), but it outperforms on the other complex problems (i.e., $F_{5}-F_{8}$ ), which is high-dimensional. $\mathrm{EDA}_{m v n}$ also shows a faster average convergence speed on the real-world benchmark

![img-3.jpeg](img-3.jpeg)

Fig. 4. Convergence process on the benchmark suite. Each curve shows the convergence process with the largest profit obtained by each algorithm out of all the 30 runs. (a)-(h) are the convergence process on $F_{1}-F_{8}$, respectively. (i) is the convergence process on RMdata.

RMdata, which illustrates that $\mathrm{EDA}_{m v n}$ is effective in real applications. Moreover, AEDA shows a faster convergence speed than other algorithms on most of the test instances at the beginning of the search process, but the final solutions of it are not good. As for the other three algorithms, $D E_{m v}$ shows better than GA-PSO and $\mathrm{ACO}_{m v}$.

In addition, we can draw the following two conclusions from these figures. First, the initial population of $\mathrm{EDA}_{m v n}$ shows a higher quality than others. This is because in the initialization of $\mathrm{EDA}_{m v n}$, we use a constraint handling method to generate more feasible solutions. This method can enhance the solution quality. Second, in $\mathrm{EDA}_{m v n}$, the fitness of the optimal solution keeps relative stable with a low value at the beginning of evolution process but increases very quickly after several iterations. The reason is that at the early stage, the promising area in the AWH model is still very large, while the adaptive width of histogram is helpful to shrink this promising area later. With the promising area becomes smaller and smaller,
the probability to find better solutions increases significantly, thus the convergence process of $\mathrm{EDA}_{m v n}$ will speed up.

## D. Sensitivity Analysis to Parameters in $E D A_{m v n}$

The population size $N$ and the number of bins $W$ are two crucial parameters to $\mathrm{EDA}_{m v n}$. In this section, we discuss the effect of these two parameters to $\mathrm{EDA}_{m v n}$ based on the benchmark suite in Section IV. We vary one parameter once and other parameters are fixed.

1) Sensitivity to $N$ : To test the effect of the population size $N, \mathrm{EDA}_{m v n}$ with $N=100,200,300,500,600,1000$ are run on the test instances, while the number of bins $W=2000$. Fig. 5 shows that with the increment of the population size, the profits increase first from $N=100-600$ in most curves, while decreasing when $N=1000$. Fig. 5 illustrates that $\mathrm{EDA}_{m v n}$ can find more accurate solutions and get the best solution when $N=600$, but the solution quality in some of the

TABLE VII
Comparison Results on the Synthetic Benchmark Suite With Different Degree of CFs. The Results Shown by the Normalized Values. Each Row Shows the Results of Different Algorithms Under a Certain Factor Level. The Best Results Are Shown in Bold Type


TABLE VIII
Comparison Results on the Synthetic Benchmark Suite With Different PS. The Results Shown by the Normalized Values. Each Row Shows the Results of Different Algorithms Under a Certain Factor Level. The Best Results Are Shown in Bold Type


![img-4.jpeg](img-4.jpeg)

Fig. 5. Mean profit for $\mathrm{EDA}_{\text {mox }}$ with different population size.
instances becomes worse when $N=1000$. The reason can be summarized as follows. Since most of our problems are high-dimensional and have a wide search space, a small population size may make it hard to build a high-quality model. On the other hand, if the population size becomes too large, the number of iterations will be reduced under a fixed number of FEs, and the algorithm may not be able to find the optimal solutions.
2) Sensitivity to $W$ : To test the effect of the number of bins $W, \mathrm{EDA}_{\text {mox }}$ with $W=100,200, \ldots, 1900,2000$ are tested, and the population size $N$ is set as 600 . As the process to build the probability model by the AWH model will become more time-consuming with the increment on $W$, the maximum number of bins is set as 2000 in our experiment.

The results are shown in Fig. 6. It is obvious that the quality of the optimal solution increases according to the growth of $W$. In the AWH model, since the bins in the promising area is shrinking as the search goes, the bin that contain the optimal solution is also becoming narrow. Therefore, it is very promising to find high-quality solutions. Although a smaller $W$ can make the bin that contains the optimal solution have a higher probability to be selected, the larger width of the bin will make it more difficult to sample the optimal solution in
![img-5.jpeg](img-5.jpeg)

Fig. 6. Mean profit for $\mathrm{EDA}_{\text {mox }}$ with different number of bins.
this bin. A larger $W$ can partition the search space into lots of narrower bins. In this case, although the number of bins will increase, many of these bins are empty and cannot be selected. Furthermore, a narrower width can increase the probability of sampling the optimal solution in the later random sampling process and it is very helpful to find high precise solutions.

## VI. CONCLUSION

Since the newsvendor model has a significant practical application in the field of production, service and management, various variants of the newsvendor model have been proposed. However, previous variants mainly focus on the order quantity but ignore the effect of the real demand on selling price which cannot satisfy the real-world investment market. This article takes into account the price as decision variable and propose a new newsvendor model. Then, the newsvendor problem can be formulated as a constrained mixed-variable nonlinear programming (MINLP) problem.

In order to address the new newsvendor problem, this article designed a mixed-variable EDA, i.e., $\mathrm{EDA}_{\text {mox }}$. First, in order to promote the efficiency of initialization, a constraints handling strategy is employed to generate feasible solutions. Second, an

EDA based on histogram models, the AWH model for the continuous variables and LBH model for the discrete variables, is used as the optimizer to find the optimal solution. Besides that, a constraint-based selection method is employed to find high-quality solutions. In order to evaluate the performance of $\mathrm{EDA}_{\text {mvm }}$, a synthetic benchmark suite is developed by the orthogonal experiment design method and a real-world benchmark is used to further evaluate the performance of $\mathrm{EDA}_{\text {mvn }}$ in real applications.
The experimental results show that, the proposed $\mathrm{EDA}_{\text {mvn }}$ algorithm is effective to obtain more profit on the new mixedvariable newsvendor model than the classical model. Further more, $\mathrm{EDA}_{\text {mvn }}$ has been compared with the commercial solver (i.e., Lingo) and other state-of-the-art MINLP algorithms, and also show a competitive performance.
Although there are many researches which try to solve the mixed-variable optimization problem using EAs, little work has been reported on the research of newsvendor problem, especially for MINLP newsvendor problems. This article proposes an EDA-based method for newsvendor problem, which offers a new perspective and an effective way to deal with MINLP problems. First, due to the histogram model-based framework does not require any prior information about distribution of solutions, and the adaptive strategy employed in AWH and LBH models can help to balance the exploration ability and the exploitation ability well, it is worthwhile exploring the proposed $\mathrm{EDA}_{\text {mvn }}$ to solve other MINLP problems in future studies. Second, the mixed-variable newsvendor model proposed in this article mainly incorporates the profit as the only optimization objective without considering market risk. The trading risk should be taken into account and the multiobjective newsvendor model should be investigated in the future.
